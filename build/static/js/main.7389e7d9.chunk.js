(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),a=t(15),o=t.n(a),i=(t(6),t(3)),u=t(0),s=function(e){return Object(u.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.person,t=e.handleRemove;return Object(u.jsxs)("p",{children:[n.name," ",n.number," ",Object(u.jsx)("button",{onClick:t,children:"delete"})]})},l=function(e){var n=e.persons,t=e.handleRemove;return Object(u.jsx)("div",{children:n.map((function(e){return Object(u.jsx)(d,{person:e,handleRemove:function(){if(window.confirm("Delete ".concat(e.name,"?")))return t(e.id)}},e.name)}))})},f=function(e){var n=e.handleFilterChange,t=e.newFilter;return Object(u.jsxs)("div",{children:["filter shown with: ",Object(u.jsx)("input",{value:t,onChange:n})]})},h=t(4),j=t.n(h),b="/api/persons",m=function(){return j.a.get(b).then((function(e){return e.data}))},O=function(e){return j.a.post(b,e).then((function(e){return e.data}))},v=function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},x=function(e){var n=e.message,t=e.success;return null===n?null:Object(u.jsx)("div",{className:t,children:n})},w=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),o=Object(i.a)(a,2),d=o[0],h=o[1],j=Object(c.useState)(""),b=Object(i.a)(j,2),w=b[0],g=b[1],C=Object(c.useState)(""),N=Object(i.a)(C,2),S=N[0],k=N[1],y=Object(c.useState)("success"),R=Object(i.a)(y,2),F=R[0],D=R[1],E=Object(c.useState)(null),J=Object(i.a)(E,2),L=J[0],A=J[1];Object(c.useEffect)((function(){m().then((function(e){r(e)}))}),[]);var B=function(e,n){A(e),D(n),setTimeout((function(){A(null)}),5e3)},I=t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(x,{message:L,success:F}),Object(u.jsx)(f,{handleFilterChange:function(e){k(e.target.value)},newFilter:S}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsx)(s,{handleSubmit:function(e){e.preventDefault();var n={name:d,number:w},c=t.filter((function(e){return e.name===d}));0!==c.length?window.confirm("".concat(c[0].name," is already added to phonebook, replace the old number with a new one?"))&&v(c[0].id,n).then((function(e){r(t.map((function(n){return n.id!==c[0].id?n:e}))),h(""),g(""),B("Updated contact information of ".concat(e.name),"success")})).catch((function(){B("Contact information of ".concat(c[0].name," is alredy deleted from server"),"error"),r(t.filter((function(e){return e!==c[0]})))})):O(n).then((function(e){r(t.concat(e)),h(""),g(""),B("Added contact information for ".concat(e.name),"success")})).catch((function(e){console.log(e.response.data.error),B("".concat(e.response.data.error),"error")}))},handleNameChange:function(e){h(e.target.value)},handleNumberChange:function(e){g(e.target.value)},newName:d,newNumber:w}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(l,{persons:I,handleRemove:function(e){p(e).then((function(){var n=t.filter((function(n){return n.id===e}));r(t.filter((function(n){return n.id!==e}))),B("Removed contact information of ".concat(n[0].name),"success")})).catch((function(){var n=t.filter((function(n){return n.id===e}));B("Contact information of ".concat(n[0].name," is alredy deleted from server"),"error"),r(t.filter((function(e){return e!==n[0]})))}))}})]})};o.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(w,{})}),document.getElementById("root"))},6:function(e,n,t){}},[[39,1,2]]]);
//# sourceMappingURL=main.7389e7d9.chunk.js.map